<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥åº·é£²é£Ÿå°æ•™å®¤</title>
    <link href="media_icon.png" rel="shortcut icon">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="min-h-screen bg-green-50 font-sans text-slate-800 pb-10">

    <header class="bg-green-600 text-white p-4 shadow-lg sticky top-0 z-10">
        <div class="w-full flex items-center justify-between px-2">
            
            <button onclick="location.href='index.html'" class="p-1 hover:bg-green-700 rounded-lg transition-colors">
                <i data-lucide="arrow-left" class="w-6 h-6"></i>
            </button>
            
            <h1 class="text-xl font-bold flex items-center gap-2">
                <i data-lucide="sprout" class="w-5 h-5"></i>
                å¥åº·é£²é£Ÿå°æ•™å®¤
            </h1>
            
            <div class="w-8"></div> 
        </div>
    </header>

    <main class="max-w-md mx-auto p-4 space-y-6">
        
        <div class="bg-white rounded-2xl p-6 shadow-md border-b-4 border-green-200">
            <h3 class="text-lg font-bold text-green-800 flex items-center gap-2 mb-4">
                <i data-lucide="calculator" class="w-5 h-5"></i>
                åŸºç¤ä»£è¬ç‡ (BMR) è¨ˆç®—
            </h3>

            <!-- 1. æ€§åˆ¥é¸é …ç§»è‡³æœ€ä¸Šæ–¹ -->
            <div class="mb-4">
                <label class="text-xs font-bold text-slate-500">ç”Ÿç†æ€§åˆ¥</label>
                <select id="genderInput" class="w-full bg-slate-100 rounded-lg p-2 mt-1 focus:ring-2 focus:ring-green-300 outline-none text-sm">
                    <option value="male">ç”·ç”Ÿ</option>
                    <option value="female">å¥³ç”Ÿ</option>
                </select>
            </div>

            <div class="grid grid-cols-2 gap-4 mb-2">
                <div>
                    <label class="text-xs font-bold text-slate-500">èº«é«˜ (cm)</label>
                    <input type="number" id="heightInput" class="w-full bg-slate-100 rounded-lg p-2 mt-1 focus:ring-2 focus:ring-green-300 outline-none" placeholder="170">
                </div>
                <div>
                    <label class="text-xs font-bold text-slate-500">é«”é‡ (kg)</label>
                    <input type="number" id="weightInput" class="w-full bg-slate-100 rounded-lg p-2 mt-1 focus:ring-2 focus:ring-green-300 outline-none" placeholder="60">
                </div>
            </div>
            
            <div class="mb-4">
                <label class="text-xs font-bold text-slate-500">å¹´é½¡ (æ­²)</label>
                <input type="number" id="ageInput" class="w-full bg-slate-100 rounded-lg p-2 mt-1 focus:ring-2 focus:ring-green-300 outline-none" placeholder="20">
            </div>

            <!-- 2. å·²åˆªé™¤æ´»å‹•é‡é¸é … -->

            <button onclick="calculateBMR()" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2 rounded-lg transition-colors mb-4">è¨ˆç®— BMR</button>
            
            <div id="bmrResult" class="hidden bg-green-50 p-3 rounded-lg border border-green-200 text-center">
                <p class="text-xs text-green-600">ä½ çš„åŸºç¤ä»£è¬ç‡ (BMR) ç´„</p>
                <p class="text-2xl font-black text-green-700 my-1"><span id="calValue">0</span> <span class="text-sm">å¤§å¡/æ—¥</span></p>
                <p class="text-xs text-green-600 mt-2">æ­¤æ•¸å€¼ç‚ºç¶­æŒç”Ÿå‘½åŸºæœ¬æ‰€éœ€ç†±é‡ï¼Œ<br>ä¸å«æ´»å‹•æ¶ˆè€—å–”ï¼</p>
            </div>
        </div>

        <div class="bg-white rounded-2xl p-6 shadow-md border-b-4 border-blue-200">
            <h3 class="text-lg font-bold text-slate-800 flex items-center gap-2 mb-4">
                <i data-lucide="gamepad-2" class="w-5 h-5 text-blue-500"></i>
                å¥åº·å¤§å“‰å• (é»æ“Šç¿»ç‰Œ)
            </h3>
            
            <!-- 3. å¡ç‰‡å®¹å™¨ï¼šå…§å®¹å°‡ç”± JavaScript éš¨æ©Ÿç”Ÿæˆ -->
            <div id="cardsContainer" class="grid grid-cols-2 gap-3">
                <!-- Javascript will render cards here -->
            </div>
        </div>

        <div class="bg-slate-200 rounded-lg p-4 text-center">
             <button onclick="location.href='index.html'" class="text-slate-600 font-bold flex items-center justify-center gap-2 w-full">
                 <i data-lucide="utensils" class="w-4 h-4"></i> å›åˆ°åˆé¤æŠ½é¸
             </button>
        </div>
        
    </main>

    <script>
        lucide.createIcons();

        // --- 1. BMR è¨ˆç®—é‚è¼¯ (æ›´æ–°ç‰ˆ) ---
        function calculateBMR() {
            const h = parseFloat(document.getElementById('heightInput').value);
            const w = parseFloat(document.getElementById('weightInput').value);
            const age = parseFloat(document.getElementById('ageInput').value);
            const gender = document.getElementById('genderInput').value;
            const resultDiv = document.getElementById('bmrResult');
            const calSpan = document.getElementById('calValue');

            if (!h || !w || !age) {
                alert("è«‹è¼¸å…¥å®Œæ•´çš„èº«é«˜ã€é«”é‡èˆ‡å¹´é½¡å–”ï¼");
                return;
            }

            // Mifflin-St Jeor å…¬å¼
            // ç”·æ€§ï¼š(10 Ã— é«”é‡) + (6.25 Ã— èº«é«˜) - (5 Ã— å¹´é½¡) + 5
            // å¥³æ€§ï¼š(10 Ã— é«”é‡) + (6.25 Ã— èº«é«˜) - (5 Ã— å¹´é½¡) - 161
            
            let bmr = (10 * w) + (6.25 * h) - (5 * age) + 5; 
            
            if (gender === 'female') {
                bmr = (10 * w) + (6.25 * h) - (5 * age) - 161;
            }

            // ç›´æ¥é¡¯ç¤º BMRï¼Œä¸ä¹˜æ´»å‹•é‡
            calSpan.innerText = Math.round(bmr);
            resultDiv.classList.remove('hidden');
        }

        // --- 2. éš¨æ©Ÿå¡ç‰‡é‚è¼¯ ---
        
        // å®šç¾©æ‰€æœ‰å¡ç‰‡è³‡æ–™ (ç´…ã€ç¶ ã€é»ƒç‡ˆ)
        const cardsData = [
            // ç´…ç‡ˆ
            { icon: 'ğŸ¥¤', title: 'å«ç³–é£²æ–™', type: 'red', desc: 'ç´…ç‡ˆé£Ÿç‰©ï¼', detail: 'æ˜“é€ æˆè‚¥èƒ–èˆ‡è¡€ç³–æ³¢å‹•ã€‚' },
            { icon: 'ğŸŸ', title: 'æ²¹ç‚¸é£Ÿå“', type: 'red', desc: 'ç´…ç‡ˆé£Ÿç‰©ï¼', detail: 'é«˜æ²¹è„‚ã€æ˜“è‡´ç™¼ç‚ã€‚' },
            { icon: 'ğŸŒ­', title: 'åŠ å·¥è‚‰å“', type: 'red', desc: 'ç´…ç‡ˆé£Ÿç‰©ï¼', detail: 'éˆ‰å«é‡é«˜ï¼Œå»ºè­°å°‘åƒã€‚' },
            // ç¶ ç‡ˆ
            { icon: 'ğŸ¥¬', title: 'ç‡™é’èœ', type: 'green', desc: 'ç¶ ç‡ˆé£Ÿç‰©ï¼', detail: 'å¢åŠ é£½è¶³æ„Ÿèˆ‡çº–ç¶­ã€‚' },
            { icon: 'ğŸš', title: 'ç³™ç±³/äº”ç©€', type: 'green', desc: 'ç¶ ç‡ˆé£Ÿç‰©ï¼', detail: 'å¯Œå«ç¶­ç”Ÿç´ Bç¾¤èˆ‡çº–ç¶­ã€‚' },
            { icon: 'ğŸ¥š', title: 'æ°´ç…®è›‹', type: 'green', desc: 'ç¶ ç‡ˆé£Ÿç‰©ï¼', detail: 'å„ªè³ªè›‹ç™½è³ªä¾†æºã€‚' },
            // é»ƒç‡ˆ (æ–°å¢)
            { icon: 'ğŸ¥¡', title: 'é‹è²¼/ç…é¤ƒ', type: 'yellow', desc: 'é»ƒç‡ˆé£Ÿç‰©ï¼', detail: 'é«˜è„‚è‚‰é¤¡èˆ‡å¸æ²¹å¤–çš®ï¼Œæ³¨æ„ä»½é‡ã€‚' },
            { icon: 'ğŸ¹', title: 'æœæ±', type: 'yellow', desc: 'é»ƒç‡ˆé£Ÿç‰©ï¼', detail: 'æ¿¾æ¸£å¾Œçº–ç¶­å°‘ï¼Œç³–åˆ†å¸æ”¶å¿«ã€‚' },
            { icon: 'ğŸ›', title: 'ç™½é£¯/ç™½éºµ', type: 'yellow', desc: 'é»ƒç‡ˆé£Ÿç‰©ï¼', detail: 'ç²¾ç·»æ¾±ç²‰ï¼Œå»ºè­°æ­é…è”¬èœé£Ÿç”¨ã€‚' }
        ];

        // æ´—ç‰Œå‡½å¼ (Fisher-Yates Shuffle)
        function shuffle(array) {
            let currentIndex = array.length, randomIndex;
            while (currentIndex != 0) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
            }
            return array;
        }

        // æ¸²æŸ“å¡ç‰‡
        function renderCards() {
            const container = document.getElementById('cardsContainer');
            const shuffledCards = shuffle([...cardsData]); // è¤‡è£½ä¸€ä»½å†æ´—ç‰Œ
            
            // ç‚ºäº†ç‰ˆé¢æ•´é½Šï¼Œæˆ‘å€‘åªå–å‰ 6 å¼µæˆ– 8 å¼µé¡¯ç¤ºï¼Œæˆ–è€…å…¨éƒ¨é¡¯ç¤ºã€‚é€™è£¡é¸æ“‡å…¨éƒ¨é¡¯ç¤ºã€‚
            container.innerHTML = ''; // æ¸…ç©º

            shuffledCards.forEach(card => {
                // æ ¹æ“šé¡å‹æ±ºå®šèƒŒé¢é¡è‰²
                let backColorClass = 'bg-gray-500';
                if (card.type === 'red') backColorClass = 'bg-red-500';
                if (card.type === 'green') backColorClass = 'bg-green-500';
                if (card.type === 'yellow') backColorClass = 'bg-yellow-500';

                const cardHtml = `
                <div class="flip-card h-32" onclick="this.classList.toggle('flipped')">
                    <div class="flip-card-inner">
                        <div class="flip-card-front bg-blue-50 border border-blue-100">
                            <div class="p-2 text-center flex flex-col items-center justify-center h-full">
                                <span class="text-3xl mb-1 block">${card.icon}</span>
                                <p class="text-sm font-bold text-blue-800">${card.title}</p>
                                <p class="text-xs text-blue-400 mt-1">(é»æˆ‘)</p>
                            </div>
                        </div>
                        <div class="flip-card-back ${backColorClass} text-white">
                            <div class="p-2 text-center flex flex-col items-center justify-center h-full">
                                <p class="text-sm font-bold">${card.desc}</p>
                                <p class="text-xs mt-1 leading-tight">${card.detail}</p>
                            </div>
                        </div>
                    </div>
                </div>
                `;
                container.innerHTML += cardHtml;
            });
        }

        // åˆå§‹åŒ–æ™‚åŸ·è¡Œ
        renderCards();

    </script>
</body>
</html>